//Slave1 - Laptop: Comm15 / PC: Comm4 - Channel A (Blue)

/*
Date: May 2018
Organization: BCCRC Imaging Unit
Authors: Varalee Chinbomsom and Daniela Tay Lee Sanchez
Description: This script is for slave1 of the I2C connection
To receive a signal from the master which will be used to pick the sine lookup table
needed based on the number of samples and output the wave at every low->high pulse of PIN_SIGNAL
*/

#include <Wire.h> // Include the required Wire library for I2C

//Constants
#define DAC_RESOLUTION 12
#define I2C_ADDRESS 0x04 //Can use script I2C_DEVICE_SCANNER to get address
#define PIN_SIGNAL 51


//Variables
int i = 0; //Iterate through wave values for sine wave
unsigned char mastersig = 0; //Signal to receive from master

//Lookup tables
static int wave_2048[2048] = 
{
2048,2054,2060,2066,2073,2079,2085,2091,2098,2104,2110,2117,2123,2129,2135,2142,2148,2154,2161,2167,2173,2179,2186,2192,2198,
2204,2211,2217,2223,2230,2236,2242,2248,2255,2261,2267,2273,2280,2286,2292,2298,2304,2311,2317,2323,2329,2336,2342,2348,2354,
2361,2367,2373,2379,2385,2392,2398,2404,2410,2416,2422,2429,2435,2441,2447,2453,2459,2466,2472,2478,2484,2490,2496,2502,2509,
2515,2521,2527,2533,2539,2545,2551,2557,2564,2570,2576,2582,2588,2594,2600,2606,2612,2618,2624,2630,2636,2642,2648,2654,2660,
2666,2672,2678,2684,2690,2696,2702,2708,2714,2720,2726,2732,2738,2744,2749,2755,2761,2767,2773,2779,2785,2791,2796,2802,2808,
2814,2820,2826,2831,2837,2843,2849,2855,2860,2866,2872,2878,2883,2889,2895,2901,2906,2912,2918,2923,2929,2935,2940,2946,2952,
2957,2963,2968,2974,2980,2985,2991,2996,3002,3008,3013,3019,3024,3030,3035,3041,3046,3052,3057,3063,3068,3074,3079,3084,3090,
3095,3101,3106,3111,3117,3122,3127,3133,3138,3143,3149,3154,3159,3165,3170,3175,3180,3186,3191,3196,3201,3206,3212,3217,3222,
3227,3232,3237,3242,3247,3253,3258,3263,3268,3273,3278,3283,3288,3293,3298,3303,3308,3313,3318,3323,3327,3332,3337,3342,3347,
3352,3357,3361,3366,3371,3376,3381,3385,3390,3395,3400,3404,3409,3414,3418,3423,3428,3432,3437,3442,3446,3451,3455,3460,3464,
3469,3473,3478,3482,3487,3491,3496,3500,3505,3509,3514,3518,3522,3527,3531,3535,3540,3544,3548,3552,3557,3561,3565,3569,3574,
3578,3582,3586,3590,3594,3598,3603,3607,3611,3615,3619,3623,3627,3631,3635,3639,3643,3647,3651,3654,3658,3662,3666,3670,3674,
3678,3681,3685,3689,3693,3696,3700,3704,3707,3711,3715,3718,3722,3726,3729,3733,3736,3740,3743,3747,3750,3754,3757,3761,3764,
3768,3771,3775,3778,3781,3785,3788,3791,3794,3798,3801,3804,3807,3811,3814,3817,3820,3823,3826,3830,3833,3836,3839,3842,3845,
3848,3851,3854,3857,3860,3863,3865,3868,3871,3874,3877,3880,3882,3885,3888,3891,3893,3896,3899,3902,3904,3907,3909,3912,3915,
3917,3920,3922,3925,3927,3930,3932,3935,3937,3940,3942,3944,3947,3949,3951,3954,3956,3958,3960,3963,3965,3967,3969,3971,3974,
3976,3978,3980,3982,3984,3986,3988,3990,3992,3994,3996,3998,4000,4002,4004,4005,4007,4009,4011,4013,4014,4016,4018,4019,4021,
4023,4024,4026,4028,4029,4031,4032,4034,4035,4037,4038,4040,4041,4043,4044,4046,4047,4048,4050,4051,4052,4053,4055,4056,4057,
4058,4060,4061,4062,4063,4064,4065,4066,4067,4068,4069,4070,4071,4072,4073,4074,4075,4076,4077,4077,4078,4079,4080,4081,4081,
4082,4083,4083,4084,4085,4085,4086,4086,4087,4088,4088,4089,4089,4090,4090,4090,4091,4091,4092,4092,4092,4093,4093,4093,4093,
4094,4094,4094,4094,4094,4095,4095,4095,4095,4095,4095,4095,4095,4095,4095,4095,4095,4095,4095,4094,4094,4094,4094,4094,4094,
4093,4093,4093,4092,4092,4092,4091,4091,4091,4090,4090,4089,4089,4088,4088,4087,4087,4086,4086,4085,4084,4084,4083,4082,4082,
4081,4080,4079,4079,4078,4077,4076,4075,4074,4074,4073,4072,4071,4070,4069,4068,4067,4066,4065,4063,4062,4061,4060,4059,4058,
4057,4055,4054,4053,4052,4050,4049,4048,4046,4045,4043,4042,4041,4039,4038,4036,4035,4033,4032,4030,4029,4027,4025,4024,4022,
4020,4019,4017,4015,4013,4012,4010,4008,4006,4004,4003,4001,3999,3997,3995,3993,3991,3989,3987,3985,3983,3981,3979,3977,3975,
3973,3970,3968,3966,3964,3962,3959,3957,3955,3953,3950,3948,3946,3943,3941,3938,3936,3934,3931,3929,3926,3924,3921,3919,3916,
3913,3911,3908,3906,3903,3900,3898,3895,3892,3889,3887,3884,3881,3878,3875,3873,3870,3867,3864,3861,3858,3855,3852,3849,3846,
3843,3840,3837,3834,3831,3828,3825,3822,3819,3815,3812,3809,3806,3803,3799,3796,3793,3790,3786,3783,3780,3776,3773,3769,3766,
3763,3759,3756,3752,3749,3745,3742,3738,3735,3731,3727,3724,3720,3717,3713,3709,3706,3702,3698,3694,3691,3687,3683,3679,3676,
3672,3668,3664,3660,3656,3652,3649,3645,3641,3637,3633,3629,3625,3621,3617,3613,3609,3605,3600,3596,3592,3588,3584,3580,3576,
3571,3567,3563,3559,3555,3550,3546,3542,3537,3533,3529,3524,3520,3516,3511,3507,3503,3498,3494,3489,3485,3480,3476,3471,3467,
3462,3458,3453,3448,3444,3439,3435,3430,3425,3421,3416,3411,3407,3402,3397,3393,3388,3383,3378,3373,3369,3364,3359,3354,3349,
3345,3340,3335,3330,3325,3320,3315,3310,3305,3300,3295,3290,3285,3280,3275,3270,3265,3260,3255,3250,3245,3240,3235,3230,3224,
3219,3214,3209,3204,3199,3193,3188,3183,3178,3172,3167,3162,3157,3151,3146,3141,3135,3130,3125,3119,3114,3109,3103,3098,3092,
3087,3082,3076,3071,3065,3060,3054,3049,3043,3038,3032,3027,3021,3016,3010,3005,2999,2994,2988,2983,2977,2971,2966,2960,2954,
2949,2943,2937,2932,2926,2920,2915,2909,2903,2898,2892,2886,2880,2875,2869,2863,2857,2852,2846,2840,2834,2829,2823,2817,2811,
2805,2799,2794,2788,2782,2776,2770,2764,2758,2752,2746,2741,2735,2729,2723,2717,2711,2705,2699,2693,2687,2681,2675,2669,2663,
2657,2651,2645,2639,2633,2627,2621,2615,2609,2603,2597,2591,2585,2579,2573,2567,2560,2554,2548,2542,2536,2530,2524,2518,2512,
2506,2499,2493,2487,2481,2475,2469,2463,2456,2450,2444,2438,2432,2426,2419,2413,2407,2401,2395,2388,2382,2376,2370,2364,2357,
2351,2345,2339,2333,2326,2320,2314,2308,2301,2295,2289,2283,2276,2270,2264,2258,2251,2245,2239,2233,2226,2220,2214,2208,2201,
2195,2189,2183,2176,2170,2164,2157,2151,2145,2139,2132,2126,2120,2113,2107,2101,2095,2088,2082,2076,2069,2063,2057,2051,2044,
2038,2032,2026,2019,2013,2007,2000,1994,1988,1982,1975,1969,1963,1956,1950,1944,1938,1931,1925,1919,1912,1906,1900,1894,1887,
1881,1875,1869,1862,1856,1850,1844,1837,1831,1825,1819,1812,1806,1800,1794,1787,1781,1775,1769,1762,1756,1750,1744,1738,1731,
1725,1719,1713,1707,1700,1694,1688,1682,1676,1669,1663,1657,1651,1645,1639,1632,1626,1620,1614,1608,1602,1596,1589,1583,1577,
1571,1565,1559,1553,1547,1541,1535,1528,1522,1516,1510,1504,1498,1492,1486,1480,1474,1468,1462,1456,1450,1444,1438,1432,1426,
1420,1414,1408,1402,1396,1390,1384,1378,1372,1366,1360,1354,1349,1343,1337,1331,1325,1319,1313,1307,1301,1296,1290,1284,1278,
1272,1266,1261,1255,1249,1243,1238,1232,1226,1220,1215,1209,1203,1197,1192,1186,1180,1175,1169,1163,1158,1152,1146,1141,1135,
1129,1124,1118,1112,1107,1101,1096,1090,1085,1079,1074,1068,1063,1057,1052,1046,1041,1035,1030,1024,1019,1013,1008,1003,997,
992,986,981,976,970,965,960,954,949,944,938,933,928,923,917,912,907,902,896,891,886,881,876,871,865,
860,855,850,845,840,835,830,825,820,815,810,805,800,795,790,785,780,775,770,765,760,755,750,746,741,
736,731,726,722,717,712,707,702,698,693,688,684,679,674,670,665,660,656,651,647,642,637,633,628,624,
619,615,610,606,601,597,592,588,584,579,575,571,566,562,558,553,549,545,540,536,532,528,524,519,515,
511,507,503,499,495,490,486,482,478,474,470,466,462,458,454,450,446,443,439,435,431,427,423,419,416,
412,408,404,401,397,393,389,386,382,378,375,371,368,364,360,357,353,350,346,343,339,336,332,329,326,
322,319,315,312,309,305,302,299,296,292,289,286,283,280,276,273,270,267,264,261,258,255,252,249,246,
243,240,237,234,231,228,225,222,220,217,214,211,208,206,203,200,197,195,192,189,187,184,182,179,176,
174,171,169,166,164,161,159,157,154,152,149,147,145,142,140,138,136,133,131,129,127,125,122,120,118,
116,114,112,110,108,106,104,102,100,98,96,94,92,91,89,87,85,83,82,80,78,76,75,73,71,
70,68,66,65,63,62,60,59,57,56,54,53,52,50,49,47,46,45,43,42,41,40,38,37,36,
35,34,33,32,30,29,28,27,26,25,24,23,22,21,21,20,19,18,17,16,16,15,14,13,13,
12,11,11,10,9,9,8,8,7,7,6,6,5,5,4,4,4,3,3,3,2,2,2,1,1,
1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,2,2,
2,2,3,3,3,4,4,5,5,5,6,6,7,7,8,9,9,10,10,11,12,12,13,14,14,
15,16,17,18,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,37,38,39,
40,42,43,44,45,47,48,49,51,52,54,55,57,58,60,61,63,64,66,67,69,71,72,74,76,
77,79,81,82,84,86,88,90,91,93,95,97,99,101,103,105,107,109,111,113,115,117,119,121,124,
126,128,130,132,135,137,139,141,144,146,148,151,153,155,158,160,163,165,168,170,173,175,178,180,183,
186,188,191,193,196,199,202,204,207,210,213,215,218,221,224,227,230,232,235,238,241,244,247,250,253,
256,259,262,265,269,272,275,278,281,284,288,291,294,297,301,304,307,310,314,317,320,324,327,331,334,
338,341,345,348,352,355,359,362,366,369,373,377,380,384,388,391,395,399,402,406,410,414,417,421,425,
429,433,437,441,444,448,452,456,460,464,468,472,476,480,484,488,492,497,501,505,509,513,517,521,526,
530,534,538,543,547,551,555,560,564,568,573,577,581,586,590,595,599,604,608,613,617,622,626,631,635,
640,644,649,653,658,663,667,672,677,681,686,691,695,700,705,710,714,719,724,729,734,738,743,748,753,
758,763,768,772,777,782,787,792,797,802,807,812,817,822,827,832,837,842,848,853,858,863,868,873,878,
883,889,894,899,904,909,915,920,925,930,936,941,946,952,957,962,968,973,978,984,989,994,1000,1005,1011,
1016,1021,1027,1032,1038,1043,1049,1054,1060,1065,1071,1076,1082,1087,1093,1099,1104,1110,1115,1121,1127,1132,1138,1143,1149,
1155,1160,1166,1172,1177,1183,1189,1194,1200,1206,1212,1217,1223,1229,1235,1240,1246,1252,1258,1264,1269,1275,1281,1287,1293,
1299,1304,1310,1316,1322,1328,1334,1340,1346,1351,1357,1363,1369,1375,1381,1387,1393,1399,1405,1411,1417,1423,1429,1435,1441,
1447,1453,1459,1465,1471,1477,1483,1489,1495,1501,1507,1513,1519,1525,1531,1538,1544,1550,1556,1562,1568,1574,1580,1586,1593,
1599,1605,1611,1617,1623,1629,1636,1642,1648,1654,1660,1666,1673,1679,1685,1691,1697,1703,1710,1716,1722,1728,1734,1741,1747,
1753,1759,1766,1772,1778,1784,1791,1797,1803,1809,1815,1822,1828,1834,1840,1847,1853,1859,1865,1872,1878,1884,1891,1897,1903,
1909,1916,1922,1928,1934,1941,1947,1953,1960,1966,1972,1978,1985,1991,1997,2004,2010,2016,2022,2029,2035,2041,2048
};

static int wave_1024[1024] = 
{
2048,2060,2073,2085,2098,2110,2123,2136,2148,2161,2173,2186,2198,2211,2223,2236,2248,2261,2273,2286,2298,2311,2323,2336,2348,
2361,2373,2385,2398,2410,2423,2435,2447,2460,2472,2484,2497,2509,2521,2533,2545,2558,2570,2582,2594,2606,2618,2630,2642,2654,
2666,2678,2690,2702,2714,2726,2738,2750,2762,2773,2785,2797,2808,2820,2832,2843,2855,2866,2878,2889,2901,2912,2924,2935,2946,
2958,2969,2980,2991,3002,3014,3025,3036,3047,3058,3069,3079,3090,3101,3112,3123,3133,3144,3154,3165,3176,3186,3196,3207,3217,
3227,3238,3248,3258,3268,3278,3288,3298,3308,3318,3328,3338,3347,3357,3367,3376,3386,3395,3405,3414,3424,3433,3442,3451,3460,
3470,3479,3487,3496,3505,3514,3523,3532,3540,3549,3557,3566,3574,3582,3591,3599,3607,3615,3623,3631,3639,3647,3655,3663,3670,
3678,3686,3693,3701,3708,3715,3723,3730,3737,3744,3751,3758,3765,3772,3778,3785,3792,3798,3805,3811,3818,3824,3830,3836,3842,
3848,3854,3860,3866,3872,3877,3883,3889,3894,3899,3905,3910,3915,3920,3925,3930,3935,3940,3945,3949,3954,3959,3963,3968,3972,
3976,3980,3984,3988,3992,3996,4000,4004,4008,4011,4015,4018,4022,4025,4028,4031,4034,4037,4040,4043,4046,4049,4051,4054,4056,
4059,4061,4063,4065,4067,4069,4071,4073,4075,4077,4078,4080,4081,4083,4084,4085,4087,4088,4089,4090,4091,4091,4092,4093,4093,
4094,4094,4094,4095,4095,4095,4095,4095,4095,4095,4094,4094,4093,4093,4092,4092,4091,4090,4089,4088,4087,4086,4085,4084,4082,
4081,4079,4078,4076,4074,4072,4070,4068,4066,4064,4062,4060,4057,4055,4052,4050,4047,4044,4042,4039,4036,4033,4030,4026,4023,
4020,4016,4013,4009,4006,4002,3998,3994,3990,3986,3982,3978,3974,3970,3965,3961,3956,3952,3947,3942,3938,3933,3928,3923,3918,
3913,3907,3902,3897,3891,3886,3880,3875,3869,3863,3857,3851,3845,3839,3833,3827,3821,3814,3808,3802,3795,3788,3782,3775,3768,
3761,3755,3748,3740,3733,3726,3719,3712,3704,3697,3689,3682,3674,3667,3659,3651,3643,3635,3627,3619,3611,3603,3595,3587,3578,
3570,3561,3553,3544,3536,3527,3518,3510,3501,3492,3483,3474,3465,3456,3447,3438,3428,3419,3410,3400,3391,3381,3372,3362,3352,
3343,3333,3323,3313,3303,3293,3283,3273,3263,3253,3243,3233,3222,3212,3202,3191,3181,3170,3160,3149,3139,3128,3117,3106,3096,
3085,3074,3063,3052,3041,3030,3019,3008,2997,2986,2975,2963,2952,2941,2929,2918,2907,2895,2884,2872,2861,2849,2838,2826,2814,
2803,2791,2779,2767,2756,2744,2732,2720,2708,2696,2684,2672,2660,2648,2636,2624,2612,2600,2588,2576,2564,2552,2539,2527,2515,
2503,2490,2478,2466,2453,2441,2429,2416,2404,2392,2379,2367,2354,2342,2330,2317,2305,2292,2280,2267,2255,2242,2230,2217,2205,
2192,2179,2167,2154,2142,2129,2117,2104,2092,2079,2066,2054,2041,2029,2016,2003,1991,1978,1966,1953,1941,1928,1916,1903,1890,
1878,1865,1853,1840,1828,1815,1803,1790,1778,1765,1753,1741,1728,1716,1703,1691,1679,1666,1654,1642,1629,1617,1605,1592,1580,
1568,1556,1543,1531,1519,1507,1495,1483,1471,1459,1447,1435,1423,1411,1399,1387,1375,1363,1351,1339,1328,1316,1304,1292,1281,
1269,1257,1246,1234,1223,1211,1200,1188,1177,1166,1154,1143,1132,1120,1109,1098,1087,1076,1065,1054,1043,1032,1021,1010,999,
989,978,967,956,946,935,925,914,904,893,883,873,862,852,842,832,822,812,802,792,782,772,762,752,743,
733,723,714,704,695,685,676,667,657,648,639,630,621,612,603,594,585,577,568,559,551,542,534,525,517,
508,500,492,484,476,468,460,452,444,436,428,421,413,406,398,391,383,376,369,362,355,347,340,334,327,
320,313,307,300,293,287,281,274,268,262,256,250,244,238,232,226,220,215,209,204,198,193,188,182,177,
172,167,162,157,153,148,143,139,134,130,125,121,117,113,109,105,101,97,93,89,86,82,79,75,72,
69,65,62,59,56,53,51,48,45,43,40,38,35,33,31,29,27,25,23,21,19,17,16,14,13,
11,10,9,8,7,6,5,4,3,3,2,2,1,1,0,0,0,0,0,0,0,1,1,1,2,
2,3,4,4,5,6,7,8,10,11,12,14,15,17,18,20,22,24,26,28,30,32,34,36,39,
41,44,46,49,52,55,58,61,64,67,70,73,77,80,84,87,91,95,99,103,107,111,115,119,123,
127,132,136,141,146,150,155,160,165,170,175,180,185,190,196,201,206,212,218,223,229,235,241,247,253,
259,265,271,277,284,290,297,303,310,317,323,330,337,344,351,358,365,372,380,387,394,402,409,417,425,
432,440,448,456,464,472,480,488,496,504,513,521,529,538,546,555,563,572,581,590,599,608,616,625,635,
644,653,662,671,681,690,700,709,719,728,738,748,757,767,777,787,797,807,817,827,837,847,857,868,878,
888,899,909,919,930,941,951,962,972,983,994,1005,1016,1026,1037,1048,1059,1070,1081,1093,1104,1115,1126,1137,1149,
1160,1171,1183,1194,1206,1217,1229,1240,1252,1263,1275,1287,1298,1310,1322,1333,1345,1357,1369,1381,1393,1405,1417,1429,1441,
1453,1465,1477,1489,1501,1513,1525,1537,1550,1562,1574,1586,1598,1611,1623,1635,1648,1660,1672,1685,1697,1710,1722,1734,1747,
1759,1772,1784,1797,1809,1822,1834,1847,1859,1872,1884,1897,1909,1922,1934,1947,1959,1972,1985,1997,2010,2022,2035,2048
};

static int wave_512[512] = 
{
2048,2073,2098,2123,2148,2173,2198,2224,2249,2274,2299,2324,2349,2373,2398,2423,2448,2472,2497,2522,2546,2570,2595,2619,2643,
2667,2691,2715,2739,2762,2786,2809,2832,2856,2879,2902,2925,2947,2970,2992,3014,3037,3059,3080,3102,3123,3145,3166,3187,3208,
3228,3249,3269,3289,3309,3329,3349,3368,3387,3406,3425,3443,3462,3480,3498,3515,3533,3550,3567,3584,3600,3616,3632,3648,3664,
3679,3694,3709,3724,3738,3752,3766,3779,3793,3806,3819,3831,3843,3855,3867,3878,3889,3900,3911,3921,3931,3941,3950,3960,3968,
3977,3985,3993,4001,4008,4015,4022,4029,4035,4041,4046,4052,4057,4061,4066,4070,4074,4077,4080,4083,4086,4088,4090,4092,4093,
4094,4095,4095,4095,4095,4094,4093,4092,4091,4089,4087,4084,4082,4079,4075,4072,4068,4064,4059,4054,4049,4044,4038,4032,4026,
4019,4012,4005,3997,3989,3981,3973,3964,3955,3946,3936,3926,3916,3906,3895,3884,3873,3861,3849,3837,3825,3812,3799,3786,3773,
3759,3745,3731,3716,3702,3687,3672,3656,3640,3624,3608,3592,3575,3558,3541,3524,3506,3489,3471,3452,3434,3415,3397,3377,3358,
3339,3319,3299,3279,3259,3239,3218,3197,3177,3155,3134,3113,3091,3069,3048,3025,3003,2981,2958,2936,2913,2890,2867,2844,2821,
2797,2774,2750,2727,2703,2679,2655,2631,2607,2582,2558,2534,2509,2485,2460,2435,2411,2386,2361,2336,2311,2286,2261,2236,2211,
2186,2161,2136,2110,2085,2060,2035,2010,1985,1959,1934,1909,1884,1859,1834,1809,1784,1759,1734,1709,1684,1660,1635,1610,1586,
1561,1537,1513,1488,1464,1440,1416,1392,1368,1345,1321,1298,1274,1251,1228,1205,1182,1159,1137,1114,1092,1070,1047,1026,1004,
982,961,940,918,898,877,856,836,816,796,776,756,737,718,698,680,661,643,624,606,589,571,554,537,520,
503,487,471,455,439,423,408,393,379,364,350,336,322,309,296,283,270,258,246,234,222,211,200,189,179,
169,159,149,140,131,122,114,106,98,90,83,76,69,63,57,51,46,41,36,31,27,23,20,16,13,
11,8,6,4,3,2,1,0,0,0,0,1,2,3,5,7,9,12,15,18,21,25,29,34,38,
43,49,54,60,66,73,80,87,94,102,110,118,127,135,145,154,164,174,184,195,206,217,228,240,252,
264,276,289,302,316,329,343,357,371,386,401,416,431,447,463,479,495,511,528,545,562,580,597,615,633,
652,670,689,708,727,746,766,786,806,826,846,867,887,908,929,950,972,993,1015,1036,1058,1081,1103,1125,1148,
1170,1193,1216,1239,1263,1286,1309,1333,1356,1380,1404,1428,1452,1476,1500,1525,1549,1573,1598,1623,1647,1672,1697,1722,1746,
1771,1796,1821,1846,1871,1897,1922,1947,1972,1997,2022,2048
};

static int wave_256[256] = 
{
2048,2098,2148,2199,2249,2299,2349,2399,2448,2498,2547,2596,2644,2692,2740,2787,2834,2880,2926,2971,3016,3060,3104,3147,3189,
3230,3271,3311,3351,3389,3427,3464,3500,3535,3569,3602,3635,3666,3697,3726,3754,3782,3808,3833,3857,3880,3902,3923,3943,3961,
3979,3995,4010,4024,4036,4048,4058,4067,4074,4081,4086,4090,4093,4095,4095,4094,4092,4088,4084,4078,4071,4062,4053,4042,4030,
4017,4002,3987,3970,3952,3933,3913,3891,3869,3845,3821,3795,3768,3740,3711,3681,3651,3619,3586,3552,3517,3482,3445,3408,3370,
3331,3291,3251,3210,3168,3125,3082,3038,2994,2949,2903,2857,2811,2764,2716,2668,2620,2571,2522,2473,2424,2374,2324,2274,2224,
2174,2123,2073,2022,1972,1921,1871,1821,1771,1721,1671,1622,1573,1524,1475,1427,1379,1331,1284,1238,1192,1146,1101,1057,1013,
970,927,885,844,804,764,725,687,650,613,578,543,509,476,444,414,384,355,327,300,274,250,226,204,182,
162,143,125,108,93,78,65,53,42,33,24,17,11,7,3,1,0,0,2,5,9,14,21,28,37,
47,59,71,85,100,116,134,152,172,193,215,238,262,287,313,341,369,398,429,460,493,526,560,595,631,
668,706,744,784,824,865,906,948,991,1035,1079,1124,1169,1215,1261,1308,1355,1403,1451,1499,1548,1597,1647,1696,1746,
1796,1846,1896,1947,1997,2048
};


//Method to configure Arduino
void setup() 
{
   //Start the I2C Bus as Slave on address 
   Wire.begin(I2C_ADDRESS); 
   //Set pins as inputs
   pinMode(DAC1, OUTPUT);   
   pinMode(PIN_SIGNAL, INPUT); 
    
   analogWriteResolution(DAC_RESOLUTION); //Set up resolution
   attachInterrupt(digitalPinToInterrupt(PIN_SIGNAL), PIN_ISR, RISING); //Call pin_ISR when 51 goes from low to high
}

//Method to set the signal to what was transfered by master
void receiveEvent(int bytes) 
{
  mastersig = Wire.read(); //Read one character from the I2C master and assign to x
}


//Method to loop indefinetely
void loop() 
{
   Wire.onReceive(receiveEvent); //Receive signal from master 
}

//Interrupt method, everytime the pin goes low to high
/*
 Sig -> table
  1  -> 2048
  2  -> 1024
  3  -> 512
  4  -> 256
*/
void PIN_ISR() 
{
  if (mastersig == 1) 
  {
    analogWrite(DAC1, wave_2048[i]);
    i = (i+1)%2048;
  }

  else if (mastersig == 2) 
  {
    analogWrite(DAC1, wave_1024[i]);
    i = (i+1)%1024;
  }

  else if (mastersig == 3) 
  {
    analogWrite(DAC1, wave_512[i]);
    i = (i+1)%512;
  }

  else if (mastersig == 4) 
  {
    analogWrite(DAC1, wave_256[i]);
    i = (i+1)%256;
  }
}





